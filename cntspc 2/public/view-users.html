<!DOCTYPE html>
<html>
<head>
    <title>View Users Database</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .user { margin: 15px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .user h3 { margin: 0 0 10px 0; color: #333; }
        .user-info { margin: 5px 0; }
        .user-type { padding: 3px 8px; border-radius: 12px; font-size: 12px; font-weight: bold; }
        .landlord { background: #e3f2fd; color: #1976d2; }
        .tenant { background: #f3e5f5; color: #7b1fa2; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Users Database</h1>
    <button onclick="loadUsers()">Refresh Users</button>
    <div id="usersList"></div>

    <script>
        async function loadUsers() {
            try {
                const response = await fetch('http://localhost:3000/api/users');
                const data = await response.json();
                
                const container = document.getElementById('usersList');
                
                if (data.users.length === 0) {
                    container.innerHTML = '<p>No users registered yet.</p>';
                    return;
                }
                
                container.innerHTML = data.users.map(user => `
                    <div class="user">
                        <h3>${user.firstName} ${user.lastName} <span class="user-type ${user.userType}">${user.userType}</span></h3>
                        <div class="user-info"><strong>ID:</strong> ${user.id}</div>
                        <div class="user-info"><strong>Email:</strong> ${user.email}</div>
                        <div class="user-info"><strong>User Type:</strong> ${user.userType}</div>
                        <div class="user-info"><strong>Registered:</strong> ${new Date(user.createdAt).toLocaleString()}</div>
                    </div>
                `).join('');
                
                console.log(`ðŸ‘¥ Loaded ${data.total} users from database`);
            } catch (error) {
                document.getElementById('usersList').innerHTML = '<p>Error loading users database</p>';
                console.error('Error:', error);
            }
        }
        
        // Load users on page load
        loadUsers();
    </script>
</body>
</html>