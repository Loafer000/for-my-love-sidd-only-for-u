<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List Your Property - ConnectSpace</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-brand">
                <h1>ConnectSpace üè¢</h1>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="search.html">Search</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <div class="form-container">
            <h2>List Your Commercial Property</h2>
            <p>Connect directly with tenants. No broker fees, no hassle.</p>

            <form onsubmit="submitPropertyFixed(event)">
                <div class="form-group">
                    <label>Property Name:</label>
                    <input type="text" name="propertyName" required placeholder="e.g., Modern Office Space">
                </div>

                <div class="form-group">
                    <label>Address:</label>
                    <input type="text" name="address" required placeholder="Street address">
                </div>

                <div class="form-group">
                    <label>City:</label>
                    <input type="text" name="city" required placeholder="e.g., Kolkata">
                </div>

                <div class="form-group">
                    <label>Property Type:</label>
                    <select name="propertyType" required>
                        <option value="">Select Type</option>
                        <option value="office">Office Space</option>
                        <option value="retail">Retail Shop</option>
                        <option value="warehouse">Warehouse</option>
                        <option value="industrial">Industrial</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Size (sq ft):</label>
                    <input type="number" name="size" required placeholder="e.g., 1200">
                </div>

                <div class="form-group">
                    <label>Monthly Rent (‚Çπ):</label>
                    <input type="number" name="rent" required placeholder="e.g., 50000">
                </div>

                <div class="form-group">
                    <label>Description:</label>
                    <textarea name="description" required placeholder="Describe your property..."></textarea>
                </div>

                <div class="form-group">
                    <label>Your Name:</label>
                    <input type="text" name="landlordName" required>
                </div>

                <div class="form-group">
                    <label>Phone:</label>
                    <input type="tel" name="phone" required placeholder="+91 XXXXX XXXXX">
                </div>

                <button type="submit" class="btn-primary btn-large">List Property</button>
            </form>
        </div>
    </main>

    <script>
        async function submitPropertyFixed(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const data = {
                title: formData.get('propertyName'),
                location: formData.get('address') + ', ' + formData.get('city'),
                type: formData.get('propertyType'),
                rent: parseInt(formData.get('rent')),
                size: parseInt(formData.get('size')),
                description: formData.get('description'),
                landlordName: formData.get('landlordName'),
                phone: formData.get('phone')
            };
            
            const submitBtn = event.target.querySelector('button[type="submit"]');
            submitBtn.innerHTML = 'Submitting...';
            
            try {
                const response = await fetch('http://localhost:3000/api/properties', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    alert('Property listed successfully!');
                    event.target.reset();
                } else {
                    alert('Error: ' + result.message);
                }
            } catch (error) {
                alert('Failed to list property: ' + error.message);
            } finally {
                submitBtn.innerHTML = 'List Property';
            }
        }
    </script>
</body>
</html>